@model DocumentManagement.Models.Provider.ProviderFieldModel

@{
    //get value and id
    string strId = Model.FieldType + "-" + Model.RealtedField.FieldId + "-";
    string strValue = string.Empty;
    if (Model.RealtedProviderInfo != null && Model.RealtedProviderInfo.Count > 0)
    {
        strId += Model.RealtedProviderInfo.FirstOrDefault().ProviderInfoId.ToString();
        strValue = Model.RealtedProviderInfo.FirstOrDefault().Value;
    }
}

@if (!Model.RenderScripts)
{
    <div>
        <!--Text field-->
        @if (Model.RealtedField.IsRequired)
        {
            <span>*</span>
        }
        <label>@Model.RealtedField.Name:</label>
        <input type="text" id="@strId" name="@strId" value="@strValue" />
    </div>
}
else
{
    string oAcData = string.Empty;
    
    if (Model.ProviderOptions.ContainsKey(Model.RealtedField.ProviderInfoType.ItemId))
    {
        oAcData = (new System.Web.Script.Serialization.JavaScriptSerializer()).
        Serialize(
            Model.
            ProviderOptions[Model.RealtedField.ProviderInfoType.ItemId].
            Select(x => x.ItemName).ToList());
    }
    <script type="text/javascript">
        var vAcData = @(Html.Raw(oAcData));
        $(document).ready(function () {
            //start ac
            PF_InitAutocomplete('@strId', vAcData);

            PF_ValidateFormObject.AddRule({
                idDiv: '@(strId)',
                Required: @(Model.RealtedField.IsRequired.ToString().ToLower()),
                Type:'autocomplete'
            });
        });
    </script>
}


