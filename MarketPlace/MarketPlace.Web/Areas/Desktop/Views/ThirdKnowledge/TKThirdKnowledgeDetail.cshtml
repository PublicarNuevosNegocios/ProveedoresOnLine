@model MarketPlace.Models.Provider.ProviderViewModel
@{
    ViewBag.Title = "Proveedores OnLine - Consulta Individual";
    Layout = MVC.Desktop.Shared.Views._Layout;

    Model.RenderScripts = false;
}

@*ESTE ES EL ENVUELTO COMPLETO DE MENU LATERAL Y CONTENIDO*@
<div class="POMPProviderGreatWrapper">
    @*ESTE ES QUE TRAE EL PARCIAL QUE PINTA EL MENU LATERAL*@
    <div class="POMPProviderSideMenuWrapper">
        @Html.Partial(MVC.Desktop.Shared.Views._P_ProviderMenu, Model)
    </div>

    <div class="POMPProviderDataWrapper">
        <label class="POMPSectionTitles">Información Detallada</label>
        <div class="container-fluid">
            @if (Model.RelatedThidKnowledgeSearch != null &&
                    Model.RelatedThidKnowledgeSearch.ThirdKnowledgeResult != null &&
                    Model.RelatedThidKnowledgeSearch.ThirdKnowledgeResult.Count > 0)
            {
                foreach (var item in Model.RelatedThidKnowledgeSearch.ThirdKnowledgeResult)
                {

                    <div class="POMPEvalTitle" id="POMPEvalTitleMargin">
                        <div class="col-xs-12">
                            <div class="col-xs-8">
                                <p>Tipo de consulta:&nbsp;<span class="ThirdKnowledge_FilterDetail">@item.SearchType.ItemName</span></p>
                                <p>Realizada por:&nbsp;<span class="ThirdKnowledge_FilterDetail">@item.User</span></p>
                                <p class="ThirdKnowledge_marginBottom">Fecha:&nbsp;<span class="ThirdKnowledge_FilterDetail">@item.CreateDate</span></p>
                            </div>
                            <div class="col-xs-4 text-center ThirdKnowledge_ListDetail">
                                <div class="row text-center">
                                    <form id="frmThirdKnowledgeUpsert"
                                          method="post"
                                          action="@(Url.Action
                                                    (MVC.ThirdKnowledge.ActionNames.TKThirdKnowledgeDetail,
                                                    MVC.ThirdKnowledge.Name,
                                                    new
                                                    {
                                                        QueryPublicId = Model.RelatedThidKnowledgeSearch.ThirdKnowledgeResult.Where(x => x.QueryPublicId != null).Select(x => x.QueryPublicId).DefaultIfEmpty(string.Empty).FirstOrDefault(),
                                                        InitDate = Model.RelatedThidKnowledgeSearch.InitDate.ToString("yyyy-MM-dd"),
                                                        EndDate = Model.RelatedThidKnowledgeSearch.EndDate.ToString("yyyy-MM-dd"),
                                                    }))">
                                        <button id="POMPButtonDownloadReports" type="submit" title="Descargar Reporte">Descargar Reporte</button>
                                        <input type="hidden" name="DownloadReport" value="true" />
                                    </form>
                                </div>
                                <div class="row text-center ThirdKnowledge_GoBack">
                                    @*Return Buttom*@
                                    @if (!string.IsNullOrEmpty(Model.RelatedThidKnowledgeSearch.InitDate.ToString("yyyy-MM-dd")) && Model.RelatedThidKnowledgeSearch.InitDate.ToString("dd/MM/yyyy") != "01/01/0001" &&
!string.IsNullOrEmpty(Model.RelatedThidKnowledgeSearch.EndDate.ToString("yyyy-MM-dd")) && Model.RelatedThidKnowledgeSearch.EndDate.ToString("dd/MM/yyyy") != "01/01/0001")
                                    {
                                        <a href="@(Url.RouteUrl
                                                    (MarketPlace.Models.General.Constants.C_Routes_Default,
                                                    new
                                                    {
                                                        controller = MVC.ThirdKnowledge.Name,
                                                        action = MVC.ThirdKnowledge.ActionNames.TKThirdKnowledgeSearch,
                                                        InitDate = Model.RelatedThidKnowledgeSearch.InitDate.ToString("yyyy-MM-dd"),
                                                        EndDate = Model.RelatedThidKnowledgeSearch.EndDate.ToString("yyyy-MM-dd"),
                                                        }))">Regresar a la búsqueda</a>
                                    }
                                    else
                                    {
                                        <a href="@(Url.RouteUrl
                                                        (MarketPlace.Models.General.Constants.C_Routes_Default,
                                                        new
                                                        {
                                                        controller = MVC.ThirdKnowledge.Name,
                                                        action = MVC.ThirdKnowledge.ActionNames.TKThirdKnowledgeSearch,
                                                        }))">Regresar a la búsqueda</a>
                                    }
                                </div>
                            </div>

                        </div>
                    </div>
                }
            }
            @if (Model.RelatedThidKnowledgeSearch != null &&
    Model.RelatedThidKnowledgeSearch.ThirdKnowledgeResult != null &&
    Model.RelatedThidKnowledgeSearch.ThirdKnowledgeResult.Count > 0)
            {
                foreach (var item in Model.RelatedThidKnowledgeSearch.ThirdKnowledgeResult)
                {
                    foreach (var query in item.RelatedQueryBasicInfoModel)
                    {
                        <div class="POMPContainerResult">
                            <div id="POMPResultName">
                                <p>@query.NameResult</p>
                                <a href="@(Url.RouteUrl
                                      (MarketPlace.Models.General.Constants.C_Routes_Default,
                                      new
                                      {
                                          controller = MVC.ThirdKnowledge.Name,
                                          action = MVC.ThirdKnowledge.ActionNames.TKDetailSingleSearch,
                                          QueryBasicPublicId = query.QueryBasicPublicId,                                
                                            }))">Ver Detalle</a>
                            </div>
                            <div class="POMPResultSection">
                                <label>Número de Identificación</label>
                                <p>@query.IdentificationResult</p>
                            </div>
                            <div class="POMPResultSection">
                                <label>Alias</label>
                                <p>@query.Alias</p>
                            </div>
                            <div class="POMPResultSection">
                                <label>Cargo o Delito</label>
                                <p>@query.Offense</p>
                            </div>
                            <div class="POMPResultSection">
                                <label>Peps</label>
                                <p>@query.Peps</p>
                            </div>
                            <div class="POMPResultSection">
                                <label>Prioridad</label>
                                <p>@query.Priority</p>
                            </div>
                            <div class="POMPResultSection">
                                <label>Estado</label>
                                <p>@(query.Enable == true ? "Activo" : "Inactivo")</p>
                            </div>
                        </div>
                        <hr />
                    }
                }
            }
        </div>
    </div>


</div>

@{
    Model.RenderScripts = true;
}
@section inlinescripts
{
    @Html.Partial(MVC.Desktop.Shared.Views._P_ProviderMenu, Model)

    <script type="text/javascript">
        $(document).ready(function () {

        });
    </script>
}