@model MarketPlace.Models.Compare.CompareDetailViewModel
@{
    ViewBag.Title = "Proveedores OnLine - Comparación de proveedores - Balances";
    Layout = MVC.Desktop.Shared.Views._Layout;

    Model.RenderScripts = false;
}

<div>
    <div class="POMPProviderSideMenuWrapper">
        @Html.Partial(MVC.Desktop.Shared.Views._CM_CompareMenu, Model)
    </div>
    <div class="POMPProviderDataWrapper">
        <div id="CompareDetail"></div>
        <div id="CompareDetail_NoResult" style="display:none;">
            Esta comparación no arrojo resultados
        </div>
    </div>
</div>

<div style="display:none;">

    <div id="CMPBalance_Company_Header_Template">
        <div>
            @Html.Partial(MVC.Desktop.Shared.Views._P_Search_Comparison_Item, new MarketPlace.Models.Provider.ProviderLiteViewModel(null))
        </div>
        <ul>
            @foreach (string un in Model.UnitNames)
            {
                <li>@un</li>
            }
        </ul>
    </div>
    <div id="CMPBalance_EvaluationArea_Item_Template">
        <div>
            <span>${EvaluationArea.Name}</span>
        </div>
    </div>
    <div id="CMPBalance_Company_Item_Template">
        <ul>
            @for (int i = 1; i <= Model.MaxValueCount; i++)
            {
                <li>${_{ProviderPublicId}.Unit_@(i.ToString()).Before} ${_{ProviderPublicId}.Value_@(i.ToString())} ${_{ProviderPublicId}.Unit_@(i.ToString()).After}</li>
            }
        </ul>
    </div>

</div>

@{
    Model.RenderScripts = true;

    string oJsonColumns = Model.GetJsonColumns();
    string oJsonData = Model.GetJsonData();
    string oJsonCompany = Model.GetJsonCompany();
}
@section inlinescripts
{
    @Html.Partial(MVC.Desktop.Shared.Views._CM_CompareMenu, Model)

    @if (!string.IsNullOrEmpty(oJsonData) && 
        oJsonData.Replace(" ","") != "[]" && 
        !string.IsNullOrEmpty(oJsonColumns) && 
        !string.IsNullOrEmpty(oJsonCompany))
    {
        <script type="text/javascript">
            $(document).ready(function () {
                Compare_DetailObject.Init({
                    ObjectId: 'CompareDetail',
                    RelatedProvider: @Html.Raw(oJsonCompany),
                });

                $('#' + Compare_DetailObject.ObjectId).kendoGrid({
                    editable: false,
                    navigatable: false,
                    pageable: false,
                    scrollable: true,
                    selectable: true,
                    dataSource: {
                        data: @Html.Raw(oJsonData),
                    },
                    columns: @Html.Raw(oJsonColumns),
                });
            });
        </script>
    }
    else
    {
        <script type="text/javascript">
            $(document).ready(function () {

                Compare_DetailObject.Init({
                    ObjectId: 'CompareDetail',
                    RelatedProvider: @Html.Raw(oJsonCompany),
                });

                $('#' + Compare_DetailObject.ObjectId).hide();
                $('#' + Compare_DetailObject.ObjectId + '_NoResult').show();
            });
        </script>
    }
}



